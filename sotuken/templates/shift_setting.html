<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
      <link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}">
      <link rel="stylesheet" href="{{ url_for('static', filename='css/hamburger.css') }}">
</head>
<body>
    <div class="menu-btn" id="menuBtn"><span></span><span></span><span></span></div>
    
    <!-- <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã¸</button> -->

    <!-- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="side-menu" id="sideMenu">
        <div class="close-btn" id="closeBtn">Ã—</div>
        <h3>ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h3>
        <a href="/login/manager/home">ğŸ“… ãƒ›ãƒ¼ãƒ </a>
        <a href="/shift/manage">â“ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆç®¡ç†ç”»é¢</a>
        <a href="/insert/">ğŸ‘¥ å¾“æ¥­å“¡ç™»éŒ²</a>
        <a href="/makeshift/admin">ğŸ“ ã‚·ãƒ•ãƒˆä½œæˆ</a>
        <a href="/login/logout">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
    </div>

  <div class="container">
    <h1>ğŸ›  ã‚·ãƒ•ãƒˆè‡ªå‹•ç”Ÿæˆè¨­å®š</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div style="margin-bottom: 20px;">
          {% for category, msg in messages %}
            <div class="flash-message flash-{{ category }}">
              {{ msg }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- åŸºæœ¬è¨­å®šã‚«ãƒ¼ãƒ‰ -->
    <div class="basic-settings-card">
      <h2>âš™ï¸ åŸºæœ¬è¨­å®š</h2>
      <form method="POST" action="{{ url_for('makeshift.settings') }}">
        <div class="settings-grid">
          <div class="setting-item">
            <label>ğŸ• é–‹å§‹æ™‚é–“</label>
            <input type="time" name="start_time" value="{{ settings.start_time }}" min="00:00" max="23:59" required>
          </div>
          <div class="setting-item">
            <label>ğŸ•™ çµ‚äº†æ™‚é–“</label>
            <input type="time" name="end_time" value="{{ settings.end_time }}" min="00:00" max="23:59" required>
          </div>
          <div class="setting-item">
            <label>ğŸ‘¥ æ™‚é–“å¸¯æœ€å¤§äººæ•° <span style="font-size:0.8em; opacity:0.8;">(é‡è¦)</span></label>
            <input type="number" name="max_people_per_shift" value="{{ settings.max_people_per_shift }}" min="1" max="100" required>
            <small style="display:block; margin-top:5px; font-size:0.75em; opacity:0.8;">ä¸‹è¨˜ã®å¿…è¦äººæ•°è¨­å®šã®ä¸Šé™å€¤</small>
          </div>
                    <!-- å¤‰æ›´å¾Œ -->
          <div class="setting-item">
            <label>â±ï¸ æ™‚é–“é–“éš”ï¼ˆåˆ†ï¼‰</label>
            <input type="text" value="15åˆ†ï¼ˆå›ºå®šï¼‰" disabled style="cursor: not-allowed; opacity: 0.7;">
            <input type="hidden" name="interval_minutes" value="15">
          </div>

          <div class="setting-item">
            <label>â° 1æ—¥æœ€ä½å‹¤å‹™æ™‚é–“</label>
            <input type="number" name="min_hours_per_day" value="{{ settings.min_hours_per_day }}" min="0" max="24" step="0.5" required>
            <small style="display:block; margin-top:5px; font-size:0.75em; opacity:0.8;">ã‚¹ã‚¿ãƒƒãƒ•ãŒå¸Œæœ›ã‚’å‡ºã™éš›ã®æœ€ä½æ™‚é–“</small>
          </div>

          <div class="setting-item">
            <label>ğŸ“… 1æ—¥æœ€å¤§å‹¤å‹™æ™‚é–“</label>
            <input type="number" name="max_hours_per_day" value="{{ settings.max_hours_per_day }}" min="1" max="24" step="0.5" required>
          </div>
        </div>
        <!-- éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ã¨ã™ã‚‹å€¤ -->
        <input type="hidden" name="break_minutes" value="{{ settings.break_minutes }}">
        <input type="hidden" name="min_hours_per_day" value="{{ settings.min_hours_per_day }}">
        <input type="hidden" name="auto_mode" value="{{ settings.auto_mode }}">
        
        <div style="text-align: right;">
          <button type="submit" class="save-btn">ğŸ’¾ åŸºæœ¬è¨­å®šã‚’ä¿å­˜</button>
        </div>
      </form>
    </div>

    <h2 id="demand-section" style="margin-top: 40px;">ğŸ“Š æ™‚é–“å¸¯ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³ãƒ»å¿…è¦äººæ•°è¨­å®š</h2>
    
    <div class="tab-container">
        <button type="button" class="tab-btn tab-weekday active" id="btn-weekday" onclick="switchTab('weekday')">ğŸ¢ å¹³æ—¥ã®è¨­å®š</button>
        <button type="button" class="tab-btn tab-holiday" id="btn-holiday" onclick="switchTab('holiday')">ğŸ‰ åœŸæ—¥ç¥ã®è¨­å®š</button>
    </div>

    <p style="text-align:center; color:#666; margin-bottom:20px;">
        <span id="desc-weekday">å¹³æ—¥ï¼ˆæœˆã€œé‡‘ï¼‰ã®è¨­å®šã§ã™ã€‚</span>
        <span id="desc-holiday" style="display:none; color:#d32f2f; font-weight:bold;">åœŸæ—¥ãƒ»ç¥æ—¥ã®è¨­å®šã§ã™ã€‚å¿™ã—ã„æ™‚é–“ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚</span>
    </p>


    <div id="area-weekday" class="demand-area">
        <div class="time-zone-grid">

            <div class="zone-card zone-morning">
                <div class="zone-title">â˜€ï¸ æœãƒ»é–‹åº—æº–å‚™</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="weekday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="09:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="11:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}" {% if pos.id == 2 %}selected{% endif %}>{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="1"></div>
                    <button type="submit" class="add-btn" style="background:#4caf50;">ï¼‹ å¹³æ—¥ã®æœã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-lunch">
                <div class="zone-title">ğŸ” æ˜¼ãƒ»ãƒ©ãƒ³ãƒãƒ”ãƒ¼ã‚¯</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="weekday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="11:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="14:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="3"></div>
                    <button type="submit" class="add-btn" style="background:#ff9800;">ï¼‹ å¹³æ—¥ã®æ˜¼ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-idle">
                <div class="zone-title">â˜•ï¸ 15æ™‚ãƒ»ã‚¹ãƒŠãƒƒã‚¯</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="weekday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="14:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="17:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="1"></div>
                    <button type="submit" class="add-btn" style="background:#9e9e9e;">ï¼‹ å¹³æ—¥ã®ã‚¹ãƒŠãƒƒã‚¯ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-night">
                <div class="zone-title">ğŸ» å¤œãƒ»ãƒ‡ã‚£ãƒŠãƒ¼</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="weekday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="17:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="23:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="4"></div>
                    <button type="submit" class="add-btn" style="background:#3f51b5;">ï¼‹ å¹³æ—¥ã®å¤œã‚’è¿½åŠ </button>
                </form>
            </div>

        </div>
    </div>
    <script>
      function switchTab(type) {
          // ã‚¨ãƒªã‚¢ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º
          document.getElementById('area-weekday').style.display = (type === 'weekday') ? 'block' : 'none';
          document.getElementById('area-holiday').style.display = (type === 'holiday') ? 'block' : 'none';
      
          // èª¬æ˜æ–‡ã®åˆ‡ã‚Šæ›¿ãˆ
          document.getElementById('desc-weekday').style.display = (type === 'weekday') ? 'inline' : 'none';
          document.getElementById('desc-holiday').style.display = (type === 'holiday') ? 'inline' : 'none';
      
          // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆ
          const btnW = document.getElementById('btn-weekday');
          const btnH = document.getElementById('btn-holiday');
          
          if (type === 'weekday') {
              btnW.classList.add('active');
              btnH.classList.remove('active');
          } else {
              btnH.classList.add('active');
              btnW.classList.remove('active');
          }
      
          // ã‚¿ãƒ–ã®çŠ¶æ…‹ã‚’ä¿å­˜
          sessionStorage.setItem('activeTab', type);
      }
      </script>
      


    <div id="area-holiday" class="demand-area" style="display:none;">
        <div class="time-zone-grid">

            <div class="zone-card zone-morning">
                <div class="zone-title">â˜€ï¸ æœãƒ»é–‹åº—æº–å‚™ (ä¼‘æ—¥)</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="holiday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="09:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="11:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}" {% if pos.id == 2 %}selected{% endif %}>{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="2"></div>
                    <button type="submit" class="add-btn" style="background:#4caf50;">ï¼‹ ä¼‘æ—¥ã®æœã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-lunch">
                <div class="zone-title">ğŸ” æ˜¼ãƒ»ãƒ©ãƒ³ãƒãƒ”ãƒ¼ã‚¯ (ä¼‘æ—¥)</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="holiday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="11:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="14:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="4"></div>
                    <button type="submit" class="add-btn" style="background:#ff9800;">ï¼‹ ä¼‘æ—¥ã®æ˜¼ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-idle">
                <div class="zone-title">â˜•ï¸ 15æ™‚ãƒ»ã‚¢ã‚¤ãƒ‰ãƒ« (ä¼‘æ—¥)</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="holiday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="14:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="17:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="2"></div>
                    <button type="submit" class="add-btn" style="background:#9e9e9e;">ï¼‹ ä¼‘æ—¥ã®ä¼‘æ†©ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="zone-card zone-night">
                <div class="zone-title">ğŸ» å¤œãƒ»ãƒ‡ã‚£ãƒŠãƒ¼ (ä¼‘æ—¥)</div>
                <form action="{{ url_for('makeshift.add_demand') }}" method="POST">
                    <input type="hidden" name="day_type" value="holiday">
                    <div style="display:flex; gap:10px;">
                        <div class="form-row" style="flex:1;"><label>é–‹å§‹</label><input type="time" name="start_time" value="17:00"></div>
                        <div class="form-row" style="flex:1;"><label>çµ‚äº†</label><input type="time" name="end_time" value="23:00"></div>
                    </div>
                    <div class="form-row">
                        <label>å½¹å‰²</label>
                        <select name="position_id">
                            {% for pos in positions %}
                            <option value="{{ pos.id }}">{{ pos.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-row"><label>äººæ•°</label><input type="number" name="required_count" min="0" value="5"></div>
                    <button type="submit" class="add-btn" style="background:#3f51b5;">ï¼‹ ä¼‘æ—¥ã®å¤œã‚’è¿½åŠ </button>
                </form>
            </div>

        </div>
    </div>
    </div>
    

    <div class="demand-list">
      <h3>ğŸ“Š ç¾åœ¨ä¿å­˜ã•ã‚Œã¦ã„ã‚‹è¨­å®šä¸€è¦§</h3>
      
      <!-- å¹³æ—¥ã®è¨­å®šä¸€è¦§ -->
      <div style="background:#f5f5f5; padding:15px; border-radius:8px; margin-bottom:20px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
          <h4 style="margin:0; color:#3f51b5;">ğŸ¢ å¹³æ—¥ã®è¨­å®š ({{ weekday_demands|length }} ä»¶)</h4>
          <form action="{{ url_for('makeshift.reset_demand_by_type') }}" method="POST" style="margin:0;">
            <input type="hidden" name="day_type" value="weekday">
            <button type="submit" style="background:#ff9800; color:white; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; font-size:0.85em;" onclick="return confirm('å¹³æ—¥ã®è¨­å®šã‚’å…¨ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">ğŸ—‘ å¹³æ—¥ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
          </form>
        </div>
        <div style="max-height: 300px; overflow-y: auto;">
          <table>
            <thead>
              <tr>
                <th style="width: 100px;">æ™‚é–“å¸¯</th>
                <th>å½¹å‰²</th>
                <th style="width: 100px;">å¿…è¦äººæ•°</th>
                <th style="width: 80px; text-align: center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              {% for d in weekday_demands %}
              <tr>
                <td>{{ d.time_slot }}</td>
                <td>
                  {% if 'ã‚­ãƒƒãƒãƒ³' in d.position_name %}
                    <span style="color:#d32f2f; font-weight:bold;">ğŸ³ {{ d.position_name }}</span>
                  {% elif 'ãƒ›ãƒ¼ãƒ«' in d.position_name %}
                    <span style="color:#1976d2; font-weight:bold;">ğŸ›ï¸ {{ d.position_name }}</span>
                  {% else %}
                    {{ d.position_name }}
                  {% endif %}
                </td>
                <td><b>{{ d.required_count }}</b> å</td>
                <td style="text-align: center;">
                  <form action="{{ url_for('makeshift.delete_demand') }}" method="POST" style="display:inline; margin:0;">
                    <input type="hidden" name="time_slot" value="{{ d.time_slot }}">
                    <input type="hidden" name="position_id" value="{{ d.position_id }}">
                    <input type="hidden" name="day_type" value="weekday">
                    <button type="submit" style="background:#ff5252; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer; font-size:0.85em;" onclick="return confirm('ã“ã®è¨­å®šã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">å‰Šé™¤</button>
                  </form>
                </td>
              </tr>
              {% else %}
              <tr><td colspan="4" style="text-align:center; color:#aaa;">å¹³æ—¥ã®è¨­å®šãŒã‚ã‚Šã¾ã›ã‚“</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    
      <!-- åœŸæ—¥ç¥ã®è¨­å®šä¸€è¦§ -->
      <div style="background:#fff3e0; padding:15px; border-radius:8px; margin-bottom:20px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
          <h4 style="margin:0; color:#d32f2f;">ğŸ‰ åœŸæ—¥ç¥ã®è¨­å®š ({{ holiday_demands|length }} ä»¶)</h4>
          <form action="{{ url_for('makeshift.reset_demand_by_type') }}" method="POST" style="margin:0;">
            <input type="hidden" name="day_type" value="holiday">
            <button type="submit" style="background:#ff9800; color:white; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; font-size:0.85em;" onclick="return confirm('åœŸæ—¥ç¥ã®è¨­å®šã‚’å…¨ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">ğŸ—‘ åœŸæ—¥ç¥ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
          </form>
        </div>
        <div style="max-height: 300px; overflow-y: auto;">
          <table>
            <thead>
              <tr>
                <th style="width: 100px;">æ™‚é–“å¸¯</th>
                <th>å½¹å‰²</th>
                <th style="width: 100px;">å¿…è¦äººæ•°</th>
                <th style="width: 80px; text-align: center;">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              {% for d in holiday_demands %}
              <tr>
                <td>{{ d.time_slot }}</td>
                <td>
                  {% if 'ã‚­ãƒƒãƒãƒ³' in d.position_name %}
                    <span style="color:#d32f2f; font-weight:bold;">ğŸ³ {{ d.position_name }}</span>
                  {% elif 'ãƒ›ãƒ¼ãƒ«' in d.position_name %}
                    <span style="color:#1976d2; font-weight:bold;">ğŸ›ï¸ {{ d.position_name }}</span>
                  {% else %}
                    {{ d.position_name }}
                  {% endif %}
                </td>
                <td><b>{{ d.required_count }}</b> å</td>
                <td style="text-align: center;">
                  <form action="{{ url_for('makeshift.delete_demand') }}" method="POST" style="display:inline; margin:0;">
                    <input type="hidden" name="time_slot" value="{{ d.time_slot }}">
                    <input type="hidden" name="position_id" value="{{ d.position_id }}">
                    <input type="hidden" name="day_type" value="holiday">
                    <button type="submit" style="background:#ff5252; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer; font-size:0.85em;" onclick="return confirm('ã“ã®è¨­å®šã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">å‰Šé™¤</button>
                  </form>
                </td>
              </tr>
              {% else %}
              <tr><td colspan="4" style="text-align:center; color:#aaa;">åœŸæ—¥ç¥ã®è¨­å®šãŒã‚ã‚Šã¾ã›ã‚“</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    
      <!-- å…¨ä½“ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
      <div style="text-align:right;">
        <form action="{{ url_for('makeshift.reset_demand') }}" method="POST" style="margin:0; display:inline;">
          <button type="submit" style="background:#d32f2f; color:white; padding:8px 16px; border:none; border-radius:4px; cursor:pointer;" onclick="return confirm('å¹³æ—¥ãƒ»åœŸæ—¥ç¥ã®å…¨ã¦ã®è¨­å®šã‚’å‰Šé™¤ã—ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')">ğŸ—‘ å…¨ã¦å‰Šé™¤ã—ã¦ãƒªã‚»ãƒƒãƒˆ</button>
        </form>
      </div>
    </div>
    <div style="background:#fff; padding:20px; border-radius:8px; margin-top:30px;">
      <h3>ğŸ“… ç‰¹åˆ¥å–¶æ¥­æ™‚é–“ã®è¨­å®š</h3>
<p style="color:#666; margin-bottom:20px;">å·¥äº‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãªã©ã€ç‰¹å®šã®æ—¥ã®å–¶æ¥­æ™‚é–“ã‚’å€‹åˆ¥ã«è¨­å®šã§ãã¾ã™ã€‚</p>

<form id="special-hours-add-form" action="{{ url_for('makeshift.add_special_hours') }}" method="POST" style="background:#f5f5f5; padding:20px; border-radius:8px;">
  <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:15px; margin-bottom:15px;">
    <div>
      <label style="display:block; margin-bottom:5px; font-weight:bold;">ğŸ“† æ—¥ä»˜</label>
      <input type="date" name="date" required style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;">
    </div>
    <div>
      <label style="display:block; margin-bottom:5px; font-weight:bold;">ğŸ• é–‹å§‹æ™‚é–“</label>
      <input type="time" name="start_time" required style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;">
    </div>
    <div>
      <label style="display:block; margin-bottom:5px; font-weight:bold;">ğŸ•™ çµ‚äº†æ™‚é–“</label>
      <input type="time" name="end_time" required style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;">
    </div>
    <div>
      <label style="display:block; margin-bottom:5px; font-weight:bold;">ğŸ“ ç†ç”±</label>
      <input type="text" name="reason" placeholder="ä¾‹: å·¥äº‹" style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px;">
    </div>
  </div>
  <button type="submit" style="background:#4caf50; color:white; border:none; padding:10px 20px; border-radius:4px; cursor:pointer; font-weight:bold;">â• ç‰¹åˆ¥æ™‚é–“ã‚’è¿½åŠ </button>
</form>

<div style="margin-top:20px;">
  <h4>ç¾åœ¨ã®ç‰¹åˆ¥è¨­å®š</h4>
  <table id="special-hours-table" style="width:100%; border-collapse:collapse;">
    <thead>
      <tr style="background:#f9f9f9;">
        <th style="padding:10px; text-align:left;">æ—¥ä»˜</th>
        <th style="padding:10px; text-align:left;">é–‹å§‹æ™‚é–“</th>
        <th style="padding:10px; text-align:left;">çµ‚äº†æ™‚é–“</th>
        <th style="padding:10px; text-align:left;">ç†ç”±</th>
        <th style="padding:10px; text-align:center;">æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      {% for sh in special_hours %}
      <tr style="border-bottom:1px solid #eee;">
        <td style="padding:10px;">{{ sh.date }}</td>
        <td style="padding:10px;">{{ sh.start_time }}</td>
        <td style="padding:10px;">{{ sh.end_time }}</td>
        <td style="padding:10px;">{{ sh.reason or '-' }}</td>
        <td style="padding:10px; text-align:center;">
          <form class="delete-special-hours-form" action="{{ url_for('makeshift.delete_special_hours') }}" method="POST" style="display:inline;">
            <input type="hidden" name="date" value="{{ sh.date }}">
            <button type="submit" style="background:#ff5252; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">å‰Šé™¤</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="5" style="text-align:center; padding:20px; color:#aaa;">ç‰¹åˆ¥è¨­å®šãªã—</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
  <script src="{{ url_for('static', filename='js/shift_settings.js') }}"></script>
</body>
</html>