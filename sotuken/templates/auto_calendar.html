<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‡ªå‹•ä½œæˆã‚·ãƒ•ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auto_calendar.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

<script>
  // Flaskã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦å®šç¾©ã—ã€å¤–éƒ¨JSã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
  window.flaskData = {
    shifts: JSON.parse('{{ shifts|tojson|safe }}') || [],
    settings: JSON.parse('{{ settings|tojson|safe }}') || {}
  };
</script>

  <script src="{{ url_for('static', filename='js/auto_calendar.js') }}"></script>
</head>
<body>

  <div class="menu-btn" id="menuBtn">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <nav class="side-menu" id="sideMenu">
    <ul>
      <li><a href="{{ url_for('makeshift.show_admin_shift') }}">å¸Œæœ›ä¸€è¦§</a></li>
      <li><a href="#">å±¥æ­´</a></li> 
      <li><a href="{{ url_for('makeshift.settings') }}">è¨­å®š</a></li>
      <li><a href="#">å¾“æ¥­å“¡ç™»éŒ²</a></li>
    </ul>
  </nav>

  <header>è‡ªå‹•ä½œæˆã‚·ãƒ•ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</header>
 
  {% if settings %}
  <div class="settings-box">
    <h3>ğŸ›  ç¾åœ¨ã®è‡ªå‹•ç”Ÿæˆè¨­å®š</h3>
    <ul>
      <li>é–‹å§‹æ™‚é–“: {{ settings.start_time }}</li>
      <li>çµ‚äº†æ™‚é–“: {{ settings.end_time }}</li>
      <li>ä¼‘æ†©æ™‚é–“: {{ settings.break_minutes }}åˆ†</li>
      <li>ã‚·ãƒ•ãƒˆé–“éš”: {{ settings.interval_minutes }}åˆ†</li>
      <li>æœ€å¤§å‹¤å‹™æ™‚é–“: {{ settings.max_hours_per_day }}æ™‚é–“</li>
      <li>æœ€å°å‹¤å‹™æ™‚é–“: {{ settings.min_hours_per_day }}æ™‚é–“</li>
      <li>æ™‚é–“å¸¯æœ€å¤§äººæ•°: {{ settings.max_people_per_shift }}</li>
      <li>ãƒ¢ãƒ¼ãƒ‰: {{ settings.auto_mode }}</li>
    </ul>
  </div>
  {% endif %}
 
  {% if message %}
    <p class="message">{{ message }}</p>
  {% endif %}
 
  {% if shifts %}
    <div id="charts"></div> 
  {% else %}
    <p>ã‚·ãƒ•ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}
 
  <div class="button-group" style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
    <a href="{{ url_for('makeshift.auto_calendar') }}" class="btn secondary">â™»ï¸ å†ç·¨é›†ï¼ˆå†ç”Ÿæˆï¼‰</a>
    
    <button onclick="openHelpModal()" class="btn danger">ğŸš¨ ãƒ˜ãƒ«ãƒ—å‹Ÿé›†</button>
  </div>

  <div id="helpModal" class="modal-overlay">
    <div class="modal-content">
        <h3 style="margin-top:0; color:#d32f2f;">ğŸš¨ ãƒ˜ãƒ«ãƒ—æ€¥å‹Ÿé…ä¿¡</h3>
        <p style="margin-bottom: 15px; color: #666;">æ¡ä»¶ã«åˆã†ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆç¾åœ¨ã‚·ãƒ•ãƒˆå¤–ï¼‰ã«<br>ä¸€æ–‰é€ä¿¡ã—ã¾ã™ã€‚</p>
        
        <label for="helpDate">ğŸ“… æ—¥ä»˜:</label>
        <input type="date" id="helpDate" class="form-control">
        
        <label for="helpStart">â° é–‹å§‹æ™‚é–“:</label>
        <input type="time" id="helpStart" class="form-control">
        
        <label for="helpEnd">ğŸ çµ‚äº†æ™‚é–“:</label>
        <input type="time" id="helpEnd" class="form-control">
  
        <div class="modal-actions">
            <button onclick="closeHelpModal()" class="btn secondary" style="background:#ccc; border:none;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button onclick="submitHelpRequest()" class="btn danger">é…ä¿¡ã™ã‚‹</button>
        </div>
    </div>
  </div>
</body>
</html>