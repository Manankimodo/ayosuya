<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user_name }}さんのシフト一覧</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='user_shift_view.css') }}">
</head>
<body>
    <div class="header">
        <h2>{{ user_name }}さんのシフト一覧</h2>
        <p>ユーザーID: {{ user_id }}</p>
    </div>
    
    <div class="week-controls">
        <button id="prevWeek">← 前の週</button>
        <h3 id="currentWeekRange"></h3>
        <button id="nextWeek">次の週 →</button>
    </div>

    <div id="shift-container">
        <p class="loading">シフトデータを読み込み中...</p>
    </div>
    <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <nav class="menu" id="menu">
        <ul>
            <li><a href="{{ url_for('calendar.calendar') }}">希望シフト入力へ戻る</a></li>
            <li><a href="{{ url_for('chatbot.chat') }}">FAQ</a></li>
            <li><a href="#" id="logout-link">ログアウト</a></li>        
        </ul>
    </nav>
    <script>
        // === ログアウト確認アラート ===
        const logoutLink = document.getElementById("logout-link");
        
        if (logoutLink) {
            logoutLink.addEventListener("click", function (e) {
                e.preventDefault(); 
                const confirmed = confirm("ログアウトしますか？");
                if (confirmed) {
                    // ✅ Jinja2タグをHTML内に記述することで、Flaskが確実にURLに変換する
                    window.location.href = "{{ url_for('login.logout') }}";
                }
            });
        }
    </script>
    <script src="{{ url_for('static', filename='js/user_shift_view.js') }}"></script>
</body>
</html>