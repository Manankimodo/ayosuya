<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>LINE ID ç™»éŒ² | ShiftForm</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/register_line_id.css') }}">
</head>
<body>
  <div class="container">
    <h1>ğŸ”— LINE ID ç™»éŒ²</h1>
    <p class="subtitle">QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚“ã§ LINE ã«ç™»éŒ²</p>

    <!-- ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <div id="message-alert" class="alert" style="display: none;"></div>

    <div class="content">
      <!-- QRã‚³ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="qr-section">
        <h2>1ï¸âƒ£ QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚€</h2>
        <div class="qr-code">
          <img src="{{ qr_code_url }}" alt="LINE QR Code">
        </div>
        <div class="qr-instructions">
          <p>ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ä¸Šã®QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã¿ã€</p>
          <p>å…¬å¼LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‹é”è¿½åŠ ã—ã¾ã™ã€‚</p>
        </div>
      </div>

      <!-- åŒºåˆ‡ã‚Šç·š -->
      <div class="divider">|</div>

      <!-- çŠ¶æ…‹è¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="form-section">
        <h2>2ï¸âƒ£ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡</h2>

        <div class="status-box">
          <div class="status-icon" id="status-icon">â³</div>
          <div class="status-text waiting" id="status-text">
            ç™»éŒ²ä¸­...
          </div>
          <div class="status-text" id="status-hint">
            å‹é”è¿½åŠ å¾Œã€ä½•ã‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ãã ã•ã„
          </div>
        </div>

        <button type="button" id="start-btn" onclick="startRegistration()">
          ç™»éŒ²é–‹å§‹
        </button>
        <button type="button" class="btn-secondary" onclick="skipRegistration()">
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>

        <div class="loading" id="loading">
          <div class="spinner"></div>
          <span>ç™»éŒ²ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™...</span>
        </div>
      </div>
    </div>

    <div class="skip-link">
      <a href="#" onclick="skipRegistration(); return false;">å¾Œã§ç™»éŒ²ã™ã‚‹ â†’</a>
    </div>
  </div>

  <!-- â˜… Flaskã®URLã‚’æ¸¡ã™ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆHTMLå†…ã«æ®‹ã™ï¼‰ -->

  <script>
    window.LINE_CONFIG = {
      startRegistrationUrl: "{{ url_for('line.start_line_id_registration') }}",
      checkRegistrationUrl: "{{ url_for('line.check_line_id_registration') }}",
      managerHomeUrl: "{{ url_for('login.manager_home') }}",
      calendarUrl: "{{ url_for('calendar.calendar') }}",
      selectedRole: "{{ session.get('selected_role', '') }}",
      userRole: "{{ session.get('role', '') }}"
    };
  </script>

  
  <!-- â˜… å¤–éƒ¨JSãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ -->
  <script src="{{ url_for('static', filename='js/register_line_id_qr_webhook.js') }}"></script>
</body>
</html>