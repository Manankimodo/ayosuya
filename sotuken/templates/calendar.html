<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MovieShift ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='calendar.css') }}">
  
</head>
<body>

  <h1 id="monthYear">å¸Œæœ›ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å…¥åŠ›</h1>

  <!-- ğŸ” ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒœã‚¿ãƒ³ -->
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- æœˆåˆ‡ã‚Šæ›¿ãˆ -->
  <div class="month-switch">
    <button id="prevMonth">â† å‰ã®æœˆ</button>
    <button id="nextMonth">æ¬¡ã®æœˆ â†’</button>
  </div>

  <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <nav class="menu" id="menu">
    <ul>
      <li><a href="{{ url_for('calendar.my_confirmed_shift') }}">ç¢ºå®šã‚·ãƒ•ãƒˆã‚’ç¢ºèª</a></li>
      <li><a href="#" id="logout-link">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
      <li><a href="{{ url_for('chatbot.chat') }}">FAQ</a></li>
    </ul>
  </nav>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
  {% endwith %}


  <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
  <table class="calendar" id="calendar">
    <thead>
      <tr>
        <th>æ—¥</th>
        <th>æœˆ</th>
        <th>ç«</th>
        <th>æ°´</th>
        <th>æœ¨</th>
        <th>é‡‘</th>
        <th>åœŸ</th>
      </tr>
    </thead>
    <tbody id="calendar-body"></tbody>
  </table>

  <script id="sentDatesData" type="application/json">
    {{ sent_dates | tojson | safe }}
  </script>

<script>
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰æå‡ºæ¸ˆã¿æ—¥ä»˜ã‚’å–å¾—ã™ã‚‹å‡¦ç†ã¯ãã®ã¾ã¾ç¶­æŒ
    const sentDates = JSON.parse(document.getElementById("sentDatesData").textContent);

    // === ğŸ” ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‹•ä½œ (åˆæœŸåŒ–æ™‚ã«ä¸€åº¦ã ã‘ç™»éŒ²) ===
    const hamburger = document.getElementById('hamburger');
    const menu = document.getElementById('menu');

    if (hamburger && menu) {
        hamburger.addEventListener('click', () => {
            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨ã‚¢ã‚¤ã‚³ãƒ³ã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
            hamburger.classList.toggle('active');
            menu.classList.toggle('active');
        });
    }

    // === ğŸ”¹ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèªã‚¢ãƒ©ãƒ¼ãƒˆ (åˆæœŸåŒ–æ™‚ã«ä¸€åº¦ã ã‘ç™»éŒ²) ===
    const logoutLink = document.getElementById("logout-link");
    
    if (logoutLink) {
        logoutLink.addEventListener("click", function (e) {
            e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒªãƒ³ã‚¯é·ç§»ã‚’åœæ­¢
            const confirmed = confirm("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ");
            if (confirmed) {
                // Flaskã®ãƒ­ã‚°ã‚¢ã‚¦ãƒˆURLã¸é·ç§»
                window.location.href = "{{ url_for('login.logout') }}";
            }
        });
    }
</script>


  <!-- âœ… calendar.js ã¯ã“ã®ä¸‹ã§èª­ã¿è¾¼ã‚€ -->
  <script src="{{ url_for('static', filename='calendar.js') }}"></script>

</body>
</html>
