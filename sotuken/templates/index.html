<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Jinja: CSSãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chatbot.css') }}">
    
    <!-- JavaScriptã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ 'chatbot.js' ã«çµ±ä¸€ã—ã€deferå±æ€§ã‚’è¿½åŠ  -->
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    
    <title>AI ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ</title>
</head>
<body>
    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
    <div class="hamburger" id="hamburger">
        <span></span><span></span><span></span>
    </div>

    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <nav class="menu" id="menu">
        <ul>
            <li><a href="{{ url_for('calendar.my_confirmed_shift') }}">ç¢ºå®šã‚·ãƒ•ãƒˆã‚’ç¢ºèª</a></li>
            <li><a href="{{ url_for('chatbot.chat') }}">FAQ</a></li>
        </ul>
    </nav>

    <h1>ã‚¢ãƒ«ãƒã‚¤ãƒˆæ•™è‚²æ”¯æ´ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ</h1>

    <!-- ğŸ’¬ ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ -->
    <div class="chat-container" id="chat-container">
        {% if chat_history %}
            {% for msg in chat_history %}
                <div class="message {{ 'user' if msg.role == 'user' else 'bot' }}">
                    {{ msg.text }}
                    {% if msg.role == 'bot' and loop.previtem and loop.previtem.role == 'user' %}
                        <!-- ğŸ”„ å†ç”Ÿæˆãƒœã‚¿ãƒ³ -->
                        <button class="regen-btn" data-question="{{ loop.previtem.text }}">ğŸ”„å†ç”Ÿæˆ</button>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <div class="message bot">ã“ã‚“ã«ã¡ã¯ï¼ã”è³ªå•ã‚’ã©ã†ã ğŸ˜Š</div>
        {% endif %}
    </div>

    <!-- âœï¸ å…¥åŠ›æ¬„ -->
    <form id="chat-form" method="POST" action="/chatbot/">
        <input type="text" id="question" name="question" placeholder="è³ªå•ã‚’å…¥åŠ›..." required>
        <button type="submit">é€ä¿¡</button>
        <button type="button" id="clear-btn">å±¥æ­´ã‚’æ¶ˆã™</button>
    </form>
</body>
</html>